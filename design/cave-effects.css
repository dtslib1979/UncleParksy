/* ═══════════════════════════════════════════════════════════════
   CAVE UI - ADVANCED EFFECTS
   Awwwards / FWA / CSSDA 수준의 인터랙션
   ═══════════════════════════════════════════════════════════════ */

/* ─────────────────────────────────────────────────────────────
   NOISE TEXTURE - 동굴 벽 질감
   ───────────────────────────────────────────────────────────── */
.cave-texture::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.03;
  pointer-events: none;
  z-index: 9999;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

/* ─────────────────────────────────────────────────────────────
   CUSTOM CURSOR - 횃불/불씨
   ───────────────────────────────────────────────────────────── */
.cave-cursor {
  position: fixed;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 10000;
  mix-blend-mode: difference;
  background: var(--cave-glow);
  transform: translate(-50%, -50%);
  transition: transform 0.15s ease-out, width 0.3s, height 0.3s;
}

.cave-cursor.hover {
  width: 60px;
  height: 60px;
  background: var(--flame-edge);
  mix-blend-mode: normal;
  opacity: 0.3;
}

.cave-cursor-glow {
  position: fixed;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle, rgba(255,107,53,0.08) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  transition: opacity 0.5s;
}

/* Hide default cursor */
.cave-cursor-active,
.cave-cursor-active * {
  cursor: none !important;
}

/* ─────────────────────────────────────────────────────────────
   TEXT SPLIT ANIMATION - 글자 단위 reveal
   ───────────────────────────────────────────────────────────── */
.text-reveal {
  overflow: hidden;
}

.text-reveal .char {
  display: inline-block;
  opacity: 0;
  transform: translateY(100%);
  animation: charReveal 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes charReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Stagger delay - set via JS */
.text-reveal .char:nth-child(1) { animation-delay: 0.05s; }
.text-reveal .char:nth-child(2) { animation-delay: 0.1s; }
.text-reveal .char:nth-child(3) { animation-delay: 0.15s; }
.text-reveal .char:nth-child(4) { animation-delay: 0.2s; }
.text-reveal .char:nth-child(5) { animation-delay: 0.25s; }
.text-reveal .char:nth-child(6) { animation-delay: 0.3s; }
.text-reveal .char:nth-child(7) { animation-delay: 0.35s; }
.text-reveal .char:nth-child(8) { animation-delay: 0.4s; }
.text-reveal .char:nth-child(9) { animation-delay: 0.45s; }
.text-reveal .char:nth-child(10) { animation-delay: 0.5s; }

/* Line reveal */
.line-reveal {
  overflow: hidden;
}

.line-reveal .line {
  display: block;
  opacity: 0;
  transform: translateY(100%);
  animation: lineReveal 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes lineReveal {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ─────────────────────────────────────────────────────────────
   MAGNETIC BUTTON - 버튼이 마우스를 따라옴
   ───────────────────────────────────────────────────────────── */
.magnetic {
  position: relative;
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.magnetic-area {
  position: absolute;
  top: -50px;
  left: -50px;
  right: -50px;
  bottom: -50px;
}

/* ─────────────────────────────────────────────────────────────
   SCROLL REVEAL - 스크롤하면 나타남
   ───────────────────────────────────────────────────────────── */
.scroll-reveal {
  opacity: 0;
  transform: translateY(60px);
  transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
              transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.scroll-reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* Reveal variants */
.scroll-reveal.from-left {
  transform: translateX(-60px);
}
.scroll-reveal.from-left.revealed {
  transform: translateX(0);
}

.scroll-reveal.from-right {
  transform: translateX(60px);
}
.scroll-reveal.from-right.revealed {
  transform: translateX(0);
}

.scroll-reveal.scale-up {
  transform: scale(0.9);
}
.scroll-reveal.scale-up.revealed {
  transform: scale(1);
}

/* ─────────────────────────────────────────────────────────────
   PARALLAX DEPTH - 깊이감
   ───────────────────────────────────────────────────────────── */
.parallax-container {
  perspective: 1000px;
  overflow: hidden;
}

.parallax-layer {
  transform-style: preserve-3d;
  will-change: transform;
}

.parallax-layer[data-depth="0.2"] { --parallax-speed: 0.2; }
.parallax-layer[data-depth="0.4"] { --parallax-speed: 0.4; }
.parallax-layer[data-depth="0.6"] { --parallax-speed: 0.6; }
.parallax-layer[data-depth="0.8"] { --parallax-speed: 0.8; }

/* ─────────────────────────────────────────────────────────────
   GLITCH TEXT - 동굴 신비감
   ───────────────────────────────────────────────────────────── */
.glitch {
  position: relative;
}

.glitch::before,
.glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.8;
}

.glitch::before {
  animation: glitch-1 0.3s infinite linear alternate-reverse;
  color: var(--flame-core);
  z-index: -1;
}

.glitch::after {
  animation: glitch-2 0.3s infinite linear alternate-reverse;
  color: var(--zone-parksy);
  z-index: -2;
}

@keyframes glitch-1 {
  0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 2px); }
  20% { clip-path: inset(92% 0 1% 0); transform: translate(1px, -1px); }
  40% { clip-path: inset(43% 0 1% 0); transform: translate(-1px, 2px); }
  60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, -2px); }
  80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 1px); }
  100% { clip-path: inset(58% 0 43% 0); transform: translate(1px, 2px); }
}

@keyframes glitch-2 {
  0% { clip-path: inset(65% 0 14% 0); transform: translate(2px, -1px); }
  20% { clip-path: inset(10% 0 80% 0); transform: translate(-1px, 2px); }
  40% { clip-path: inset(72% 0 15% 0); transform: translate(1px, -2px); }
  60% { clip-path: inset(31% 0 62% 0); transform: translate(-2px, 1px); }
  80% { clip-path: inset(89% 0 3% 0); transform: translate(2px, 2px); }
  100% { clip-path: inset(12% 0 69% 0); transform: translate(-1px, -1px); }
}

/* Only glitch on hover */
.glitch-hover::before,
.glitch-hover::after {
  opacity: 0;
  animation: none;
}

.glitch-hover:hover::before,
.glitch-hover:hover::after {
  opacity: 0.8;
  animation: glitch-1 0.3s infinite linear alternate-reverse;
}

.glitch-hover:hover::after {
  animation: glitch-2 0.3s infinite linear alternate-reverse;
}

/* ─────────────────────────────────────────────────────────────
   PAGE TRANSITION - 페이지 전환
   ───────────────────────────────────────────────────────────── */
.page-transition {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--cave-void);
  z-index: 10001;
  pointer-events: none;
  transform: translateY(100%);
}

.page-transition.entering {
  animation: pageEnter 0.6s cubic-bezier(0.7, 0, 0.3, 1) forwards;
}

.page-transition.leaving {
  animation: pageLeave 0.6s cubic-bezier(0.7, 0, 0.3, 1) forwards;
}

@keyframes pageEnter {
  0% { transform: translateY(100%); }
  100% { transform: translateY(0); }
}

@keyframes pageLeave {
  0% { transform: translateY(0); }
  100% { transform: translateY(-100%); }
}

/* ─────────────────────────────────────────────────────────────
   HOVER UNDERLINE - 세련된 언더라인
   ───────────────────────────────────────────────────────────── */
.hover-line {
  position: relative;
  text-decoration: none;
}

.hover-line::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 1px;
  background: var(--flame-edge);
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.hover-line:hover::after {
  transform: scaleX(1);
  transform-origin: left;
}

/* ─────────────────────────────────────────────────────────────
   MARQUEE - 무한 스크롤 텍스트
   ───────────────────────────────────────────────────────────── */
.marquee {
  overflow: hidden;
  white-space: nowrap;
}

.marquee-inner {
  display: inline-flex;
  animation: marquee 20s linear infinite;
}

.marquee-inner span {
  padding: 0 2rem;
}

@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* Pause on hover */
.marquee:hover .marquee-inner {
  animation-play-state: paused;
}

/* ─────────────────────────────────────────────────────────────
   MORPH SHAPE - 유기적 움직임
   ───────────────────────────────────────────────────────────── */
.morph-blob {
  border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  animation: morph 8s ease-in-out infinite;
}

@keyframes morph {
  0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
  25% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
  50% { border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%; }
  75% { border-radius: 60% 40% 60% 30% / 70% 30% 50% 60%; }
}

/* ─────────────────────────────────────────────────────────────
   TORCH LIGHT EFFECT - 횃불 조명
   ───────────────────────────────────────────────────────────── */
.torch-light {
  position: fixed;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  background: radial-gradient(
    circle,
    rgba(255, 107, 53, 0.15) 0%,
    rgba(247, 147, 30, 0.08) 30%,
    transparent 70%
  );
  transform: translate(-50%, -50%);
  filter: blur(30px);
  mix-blend-mode: screen;
}

/* Flickering effect */
.torch-light.flicker {
  animation: flicker 0.1s infinite;
}

@keyframes flicker {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.95; }
  25%, 75% { opacity: 0.98; }
}

/* ─────────────────────────────────────────────────────────────
   ENTRANCE DRAMATIC - 입장 연출
   ───────────────────────────────────────────────────────────── */
.entrance-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--cave-void);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: entranceFade 2s ease forwards 1.5s;
}

@keyframes entranceFade {
  0% { opacity: 1; pointer-events: all; }
  100% { opacity: 0; pointer-events: none; }
}

.entrance-overlay .monument {
  animation: entranceText 1s ease forwards 0.3s;
  opacity: 0;
}

@keyframes entranceText {
  0% { opacity: 0; transform: scale(0.9); filter: blur(10px); }
  100% { opacity: 1; transform: scale(1); filter: blur(0); }
}

/* ─────────────────────────────────────────────────────────────
   MASK REVEAL - 마스크로 내용 드러내기
   ───────────────────────────────────────────────────────────── */
.mask-reveal {
  clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
  animation: maskReveal 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes maskReveal {
  to {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
}

/* ─────────────────────────────────────────────────────────────
   SMOOTH SCROLL - Lenis 스타일
   ───────────────────────────────────────────────────────────── */
html.lenis {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

/* ─────────────────────────────────────────────────────────────
   DISTORTION ON HOVER - 왜곡 효과
   ───────────────────────────────────────────────────────────── */
.distort {
  transition: filter 0.3s ease;
}

.distort:hover {
  filter: url('#turbulence-filter');
}

/* SVG filter for distortion - add to HTML */
/*
<svg style="position:absolute;width:0;height:0;">
  <filter id="turbulence-filter">
    <feTurbulence type="turbulence" baseFrequency="0.01" numOctaves="3" result="noise"/>
    <feDisplacementMap in="SourceGraphic" in2="noise" scale="5" />
  </filter>
</svg>
*/

/* ─────────────────────────────────────────────────────────────
   RESPONSIVE MOTION - 모션 감소 지원
   ───────────────────────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
